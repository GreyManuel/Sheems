"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[731],{3799:(t,e,s)=>{s.r(e),s.d(e,{default:()=>r});function a(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function i(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?a(Object(s),!0).forEach((function(e){n(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function n(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const o={data:function(){return{pagination:{page:1,max:15},search:"",users:[],loading:!0,edit:{loading:!1},tableKey:0}},computed:i({},(0,s(629).Se)(["allUsers","allShifts","csrfToken","sessions"])),mounted:function(){var t=this;this.$nextTick((function(){t.users=t.allUsers,setTimeout((function(){t.loading=!1,t.$bvModal.hide("edit-user")}),3e3)}))},methods:{formatDate:function(t){return null===t?" ----- ":new Date(Date.parse(t)).toLocaleDateString("en-US",{weekday:"long",day:"2-digit",month:"long",year:"numeric",hour12:!0,hour:"2-digit",minute:"numeric"})},editRow:function(t){this.edit={};var e=t.shift;delete t.shift,this.edit=i({loading:!1,shift:e.id},t),this.$bvModal.show("edit-user")},updateProfile:function(){var t=this;this.edit.loading=!0;var e=document.querySelector("#updateUserForm"),s=new FormData(e);s.append("profile",this.$refs.profileUpdate.files[0]);var a={id:this.edit.id,data:s};this.$store.dispatch("updateProfile",a).then((function(e){t.$store.dispatch("getUsers"),t.$bvModal.hide("edit-user"),t.openNotification("<h5 class='m-0'>User</h5>","<h6 class='m-0'>Updated successfully</h6>"),t.edit.loading=!0,t.users=e.data}))},openNotification:function(t,e){this.$vs.notification({title:t,text:e})}}};const r=(0,s(1900).Z)(o,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.loading?s("div",{staticClass:"d-flex flex-row align-items-center justify-content-center p-4"},[t._m(0)]):s("div",[s("div",{staticClass:"my-3 d-flex flex-row justify-content-end"},[s("vs-button",{directives:[{name:"b-modal",rawName:"v-b-modal.add-user",modifiers:{"add-user":!0}}],attrs:{danger:"",flat:""}},[s("h6",{staticClass:"m-0 fw-bold"},[s("i",{staticClass:"fa-duotone fa-plus"}),t._v("\n                    Add a User\n                ")])])],1),t._v(" "),0===t.allUsers.length?s("div",{staticClass:"p-3 m-2"},[t._v("\n            No users yet\n        ")]):s("div",[s("h6",[t._v("\n                Click on a user to view attendance history\n            ")]),t._v(" "),s("vs-table",{key:t.tableKey,scopedSlots:t._u([{key:"header",fn:function(){return[s("vs-input",{attrs:{block:"",border:"",danger:"",placeholder:"Search"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})]},proxy:!0},{key:"thead",fn:function(){return[s("vs-tr",{staticClass:"text-capitalize"},[s("vs-th",[s("h6",{staticClass:"m-0 mx-auto fw-bold"},[t._v("Avatar")])]),t._v(" "),s("vs-th",[s("h6",{staticClass:"m-0 mx-auto fw-bold"},[t._v("Name")])]),t._v(" "),s("vs-th",[s("h6",{staticClass:"m-0 mx-auto fw-bold"},[t._v("From")])]),t._v(" "),s("vs-th",[s("h6",{staticClass:"m-0 mx-auto fw-bold"},[t._v("Phone Number")])]),t._v(" "),s("vs-th",[s("h6",{staticClass:"m-0 mx-auto fw-bold"},[t._v("User Number")])]),t._v(" "),s("vs-th",[s("h6",{staticClass:"m-0 mx-auto fw-bold"},[t._v("Type")])]),t._v(" "),s("vs-th",{attrs:{sort:""},on:{click:function(e){t.users=t.$vs.sortData(e,t.users,"shift_id")}}},[s("h6",{staticClass:"m-0 mx-auto fw-bold"},[t._v("Shift")])])],1)]},proxy:!0},{key:"tbody",fn:function(){return t._l(t.$vs.getPage(t.$vs.getSearch(t.users,t.search),t.pagination.page,t.pagination.max),(function(e,a){return s("vs-tr",{key:a,scopedSlots:t._u([{key:"expand",fn:function(){return[s("div",{staticClass:"container py-3 bg-light shadow border rounded-3"},[s("h6",{staticClass:"fw-bold"},[s("i",{staticClass:"fa-duotone fa-clock-rotate-left"}),t._v("\n                                    Attendance History\n                                ")]),t._v(" "),s("div",{staticClass:"p-2"},[s("h6",{staticClass:"text-muted"},[t._v("\n                                        Options\n                                    ")]),t._v(" "),s("vs-button",{attrs:{size:"small",dark:""},on:{click:function(s){return t.editRow(e)}}},[t._v("\n                                        Edit\n                                    ")])],1),t._v(" "),s("vs-table",{scopedSlots:t._u([{key:"thead",fn:function(){return[s("vs-th",[s("h6",{staticClass:"m-0 mx-auto fw-bold"},[t._v("#")])]),t._v(" "),s("vs-th",[s("h6",{staticClass:"m-0 mx-auto fw-bold"},[t._v("Session")])]),t._v(" "),s("vs-th",[s("h6",{staticClass:"m-0 mx-auto fw-bold"},[t._v("Clocked In")])]),t._v(" "),s("vs-th",[s("h6",{staticClass:"m-0 mx-auto fw-bold"},[t._v("Clocked Out")])])]},proxy:!0},{key:"tbody",fn:function(){return t._l(e.attendances,(function(a,i){return s("vs-tr",{key:i},[s("vs-td",[s("h6",{staticClass:"m-0 text-center"},[t._v("\n                                                    "+t._s(i+1)+"\n                                                ")])]),t._v(" "),s("vs-td",[s("h6",{staticClass:"m-0 text-center"},[t._v("\n                                                    "+t._s(e.shift.sessions.find((function(t){return t.id===a.session_id})).name)+"\n                                               ")])]),t._v(" "),s("vs-td",[s("h6",{staticClass:"m-0 text-center"},[t._v("\n                                                    "+t._s(t.formatDate(a.start))+"\n                                                ")])]),t._v(" "),s("vs-td",[s("h6",{staticClass:"m-0 text-center"},[t._v("\n                                                    "+t._s(t.formatDate(a.end))+"\n                                                ")])])],1)}))},proxy:!0}],null,!0)})],1)]},proxy:!0}],null,!0)},[s("vs-td",[s("b-avatar",{attrs:{src:"../../../../storage/profile/"+e.profile}})],1),t._v(" "),s("vs-td",[s("h6",{staticClass:"m-0 text-center mx-auto",staticStyle:{width:"150px",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},[t._v("\n                               "+t._s(1==e.title?"Pastor ":2==e.title?"Bishop":"")+"\n                                "+t._s(e.name)+"\n                            ")])]),t._v(" "),s("vs-td",[s("h6",{staticClass:"m-0 text-center mx-auto",staticStyle:{width:"200px",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},[t._v("\n                                "+t._s(e.from)+"\n                            ")])]),t._v(" "),s("vs-td",[s("h6",{staticClass:"m-0 p-1 text-center mx-auto",staticStyle:{width:"250px",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},[t._v("\n                                "+t._s(e.phone_number)+"\n                            ")])]),t._v(" "),s("vs-td",[s("h6",{staticClass:"m-0 p-1 text-center mx-auto",staticStyle:{width:"250px",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},[t._v("\n                                "+t._s(e.user_number)+"\n                            ")])]),t._v(" "),s("vs-td",[s("h6",{staticClass:"m-0 p-1 text-center mx-auto",staticStyle:{width:"250px",overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},[1==e.type?s("span",{staticClass:"badge bg-warning p-2"},[t._v("\n                                    Shift Leader\n                                ")]):2==e.type?s("span",{staticClass:"badge bg-success p-2"},[t._v("\n                                    Data Analyst\n                                ")]):3==e.type?s("span",{staticClass:"badge bg-dark p-2"},[t._v("\n                                    Member\n                                ")]):t._e()])]),t._v(" "),s("vs-td",[s("h6",{staticClass:"m-0 text-center mx-auto"},[t._v("\n                                "+t._s(t.allShifts.find((function(t){return t.id===e.shift_id})).name)+"\n                            ")])])],1)}))},proxy:!0},{key:"footer",fn:function(){return[s("vs-pagination",{attrs:{color:"dark",length:t.$vs.getLength(t.users,t.pagination.max)},model:{value:t.pagination.page,callback:function(e){t.$set(t.pagination,"page",e)},expression:"pagination.page"}})]},proxy:!0}])})],1),t._v(" "),s("b-modal",{attrs:{id:"edit-user",centered:"","hide-footer":"","hide-header-close":"","title-html":"<h4 class='fw-bold m-2'><i class='fa-duotone fa-plus'></i> Edit User</h4>","content-class":"template-modal","header-class":"template-modal-header"}},[s("form",{attrs:{id:"updateUserForm",method:"post"},on:{submit:function(t){t.stopPropagation(),t.preventDefault()}}},[s("input",{attrs:{hidden:"",name:"_token"},domProps:{value:t.csrfToken}}),t._v(" "),s("div",{staticClass:"d-flex flex-column flex-md-row align-items-center justify-content-evenly"},[s("div",[s("h6",{staticClass:"fw-bold d-flex flex-row align-items-center"},[s("i",{staticClass:"fa-duotone fa-signature fa-2x"}),t._v(" "),s("span",{staticClass:"m-2"},[t._v("Name")])]),t._v(" "),s("vs-input",{attrs:{type:"text",name:"name"},model:{value:t.edit.name,callback:function(e){t.$set(t.edit,"name",e)},expression:"edit.name"}})],1),t._v(" "),s("div",[s("h6",{staticClass:"fw-bold d-flex flex-row align-items-center"},[s("i",{staticClass:"fa-duotone fa-at fa-2x"}),t._v(" "),s("span",{staticClass:"m-2"},[t._v("Email")])]),t._v(" "),s("vs-input",{attrs:{type:"email",name:"email"},model:{value:t.edit.email,callback:function(e){t.$set(t.edit,"email",e)},expression:"edit.email"}})],1)]),t._v(" "),s("div",{staticClass:"mb-3 container p-3"},[s("h6",{staticClass:"fw-bold d-flex flex-row align-items-center justify-content-center"},[s("i",{staticClass:"fa-duotone fa-user fa-2x"}),t._v(" "),s("span",{staticClass:"m-2"},[t._v("Profile")])]),t._v(" "),s("input",{ref:"profileUpdate",staticClass:"form-control border-0",staticStyle:{"border-radius":"10px"},attrs:{type:"file",name:"profile"}})]),t._v(" "),s("div",{staticClass:"d-flex flex-column flex-md-row align-items-center justify-content-evenly"},[s("div",[s("h6",{staticClass:"fw-bold d-flex flex-row align-items-center"},[s("i",{staticClass:"fa-duotone fa-location-dot fa-2x"}),t._v(" "),s("span",{staticClass:"m-2"},[t._v("From")])]),t._v(" "),s("vs-input",{attrs:{type:"text",name:"from"},model:{value:t.edit.from,callback:function(e){t.$set(t.edit,"from",e)},expression:"edit.from"}})],1),t._v(" "),s("div",[s("h6",{staticClass:"fw-bold d-flex flex-row align-items-center"},[s("i",{staticClass:"fa-duotone fa-phone fa-2x"}),t._v(" "),s("span",{staticClass:"m-2"},[t._v("Phone Number")])]),t._v(" "),s("vs-input",{attrs:{type:"tel",name:"phone_number"},model:{value:t.edit.phone,callback:function(e){t.$set(t.edit,"phone",e)},expression:"edit.phone"}})],1)]),t._v(" "),s("div",{staticClass:"d-flex flex-column flex-md-row align-items-center justify-content-evenly my-2 p-2"},[s("div",{staticClass:"flex-grow-1 m-2"},[s("h6",{staticClass:"fw-bold d-flex flex-row align-items-center"},[s("i",{staticClass:"fa-duotone fa-user-group-crown fa-2x"}),t._v(" "),s("span",{staticClass:"m-2"},[t._v("Title")])]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.edit.title,expression:"edit.title"}],staticClass:"form-control border-0",staticStyle:{"border-radius":"10px"},attrs:{name:"title",id:"title"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.edit,"title",e.target.multiple?s:s[0])}}},[s("option",{attrs:{value:"0",selected:""}},[t._v("None")]),t._v(" "),s("option",{attrs:{value:"1"}},[t._v("Pastor")]),t._v(" "),s("option",{attrs:{value:"2"}},[t._v("Bishop")])])]),t._v(" "),s("div",{staticClass:"flex-grow-1 m-2"},[s("h6",{staticClass:"fw-bold d-flex flex-row align-items-center"},[s("i",{staticClass:"fa-duotone fa-phone fa-2x"}),t._v(" "),s("span",{staticClass:"m-2"},[t._v("Type")])]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.edit.type,expression:"edit.type"}],staticClass:"form-control border-0",staticStyle:{"border-radius":"10px"},attrs:{name:"type",id:"type"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.edit,"type",e.target.multiple?s:s[0])}}},[s("option",{attrs:{value:"1"}},[t._v("Shift Leader")]),t._v(" "),s("option",{attrs:{value:"2"}},[t._v("Data Analyst")]),t._v(" "),s("option",{attrs:{value:"3",selected:""}},[t._v("Member")])])])]),t._v(" "),s("div",{staticClass:"mb-3 container p-4"},[s("h6",{staticClass:"fw-bold d-flex flex-row align-items-center"},[s("i",{staticClass:"fa-duotone fa-timer fa-2x"}),t._v(" "),s("span",{staticClass:"m-2"},[t._v("Shift")])]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.edit.shift,expression:"edit.shift"}],staticClass:"form-control border-0",staticStyle:{"border-radius":"10px"},attrs:{name:"shift",id:"shift"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.edit,"shift",e.target.multiple?s:s[0])}}},t._l(t.allShifts,(function(e,a){return s("option",{key:a,domProps:{value:e.id}},[t._v("\n                            "+t._s(e.name)+"\n                        ")])})),0)]),t._v(" "),t.errors?s("div",[s("h6",{staticClass:"m-0 text-danger fw-bold"},[t._v("\n                        Please fill all fields\n                    ")])]):t._e(),t._v(" "),s("div",{staticClass:"container d-flex flex-row justify-content-between align-items-center"},[s("vs-button",{attrs:{dark:"",flat:"",loading:t.edit.loading},on:{click:function(e){return t.updateProfile()}}},[s("h6",{staticClass:"m-0 fw-bold"},[t._v("\n                            Update\n                        ")])]),t._v(" "),s("vs-button",{staticClass:"my-3",attrs:{danger:"",flat:""},on:{click:function(e){return t.$bvModal.hide("edit-user")}}},[s("h6",{staticClass:"m-0 fw-bold"},[s("i",{staticClass:"fa-solid fa-times"}),t._v("\n                            Close\n                        ")])])],1)])])],1)])}),[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"spinner-border spinner-border-sm",staticStyle:{height:"100px",width:"100px"},attrs:{role:"status"}},[s("span",{staticClass:"visually-hidden"},[t._v("Loading...")])])}],!1,null,null,null).exports},1900:(t,e,s)=>{function a(t,e,s,a,i,n,o,r){var l,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=s,c._compiled=!0),a&&(c.functional=!0),n&&(c._scopeId="data-v-"+n),o?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},c._ssrRegister=l):i&&(l=r?function(){i.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:i),l)if(c.functional){c._injectStyles=l;var d=c.render;c.render=function(t,e){return l.call(e),d(t,e)}}else{var f=c.beforeCreate;c.beforeCreate=f?[].concat(f,l):[l]}return{exports:t,options:c}}s.d(e,{Z:()=>a})}}]);
//# sourceMappingURL=The Table Home.js.map